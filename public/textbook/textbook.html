<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>book</title>
    <style>
    </style>
</head>
<body>
    <script>
    const allUrl = new URLSearchParams(window.location.search); //获取url
    if (allUrl) {
            const edu2Url = allUrl.get('url');
            const eduUrl = new URL(edu2Url);
            //获取contentId参数
            let contentId = eduUrl.searchParams.get('contentId');
            if (!contentId) {
                      contentId = allUrl.get('contentId');
            }
            if (!contentId) {
                      alert('链接不正确');
                    window.history.back();
            }else{
            //拼接到url并打开
            const pdfUrl = atob('aHR0cHM6Ly9yMS1uZHIueWt0LmNiZXJuLmNvbS5jbi9lZHVfcHJvZHVjdC9lc3AvYXNzZXRzX2RvY3VtZW50Lw==') 
             + contentId 
             + atob('LnBrZy9wZGYucGRm');
            //开始下载
                const link = document.createElement('a');
                  link.href = pdfUrl;
                  link.rel = 'noreferrer';
                  link.referrerPolicy = 'no-referrer';
                  link.style.display = 'none';

                  document.body.appendChild(link);
                  link.click();
                  document.body.removeChild(link);

                  //结束关闭
                  setTimeout(() => {
                    window.close();
                          window.history.back();
                }, 500);
            }
    }else{
            alert('链接不正确');
            window.history.back();
    }
    </script>
</body>
</html>